# 개념
- 해당 서비스의 사용자 정보를 관리하는 테이블

# 컬럼 명세
`id`: 사용자 고유 ID (Primary Key)
`email`: 소셜 로그인을 위한 이메일
`name`: 사용자 이름 (DB 예약어이므로 ""로 감싸서 사용)
`social_provider`: 소셜 로그인 제공자 (ENUM 타입)
`status`: 회원 상태 (ENUM 타입)
`type`: 회원 유형 (DB 예약어이므로 ""로 감싸서 사용)
`birth_date`: 생년월일 (PostgreSQL의 age() 함수로 나이 계산 가능)
`gender`: 성별 (ENUM 타입)
`intro`: 한 줄 소개
`is_hidden`: 트레이너 프로필 공개 여부 (false: 공개, true: 비공개)
`bio`: 트레이너 자기소개 (장문)
`purpose`: 트레이너의 운동 목적 및 전문 분야 (쉼표로 구분된 문자열 등)
`disease`: 트레이너의 질병/부상 이력 관련 전문 분야
`activity_area`: 트레이너의 주 활동 지역
`gym_id`: 담당 헬스장 ID (추후 gyms 테이블의 FK)
`created_at`: 레코드 생성일시
`updated_at`: 레코드 마지막 수정일시

# 쿼리문
```sql
-- 테이블이 이미 존재할 경우 의존하는 객체(ENUM 등)와 함께 삭제
DROP TABLE IF EXISTS users CASCADE;

-- ENUM 타입 삭제 (개발 중 반복 실행을 위해)
DROP TYPE IF EXISTS user_status CASCADE;
DROP TYPE IF EXISTS user_type CASCADE;
DROP TYPE IF EXISTS user_gender CASCADE;
DROP TYPE IF EXISTS social_provider CASCADE;

-- ENUM 타입 정의: VARCHAR보다 안전하고 효율적으로 정해진 값만 저장하도록 강제
CREATE TYPE user_status AS ENUM ('ACTIVE', 'INACTIVE', 'SUSPENDED');
CREATE TYPE user_type AS ENUM ('MEMBER', 'TRAINER');
CREATE TYPE user_gender AS ENUM ('MALE', 'FEMALE', 'OTHER');
CREATE TYPE social_provider AS ENUM ('GOOGLE', 'KAKAO', 'NAVER');

-- users 테이블 생성
CREATE TABLE users (
  -- 기본 정보
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  email VARCHAR(255) NOT NULL UNIQUE,
  "name" VARCHAR(50) NOT NULL,
  -- 프로필 이미지는 attachments 테이블에서 'USER_PROFILE' 타입으로 관리 (image_url 컬럼 제거)
  social_provider social_provider NOT NULL,

  -- 회원 상태 및 유형
  status user_status NOT NULL DEFAULT 'ACTIVE',
  "type" user_type NOT NULL DEFAULT 'MEMBER',

  -- 개인 정보
  birth_date DATE,
  gender user_gender,
  intro VARCHAR(500),

  -- 트레이너 관련 정보 (일반 회원은 NULL)
  is_hidden BOOLEAN NOT NULL DEFAULT false,
  bio TEXT,
  purpose TEXT,
  disease VARCHAR(200),
  activity_area TEXT,
  gym_id BIGINT,

  -- 타임스탬프
  created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP
);

-- 자주 조회되는 컬럼에는 인덱스를 생성하여 성능을 향상시킵니다.
CREATE INDEX idx_users_email ON users(email);
CREATE INDEX idx_users_type ON users("type");

-- 테이블 및 컬럼에 대한 주석 추가 (설계 이해를 돕기 위함)
COMMENT ON TABLE users IS '회원 정보를 관리하는 테이블';
COMMENT ON COLUMN users.id IS '회원 고유 ID (PK)';
COMMENT ON COLUMN users.email IS '소셜 로그인을 위한 이메일 (UNIQUE)';
COMMENT ON COLUMN users.is_hidden IS '트레이너 프로필 공개 여부 (false: 공개, true: 비공개)';
COMMENT ON COLUMN users.gym_id IS '담당 체육관 ID (추후 gyms 테이블과 FK 관계 설정 권장)';
```